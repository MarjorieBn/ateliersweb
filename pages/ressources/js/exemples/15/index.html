<!DOCTYPE html>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <title>Positions d‚Äôimages al√©atoires ‚Äî 2</title>
        <style type="text/css">
            html, body { height: 100%;}
            body {
                margin:0;
                display:grid;
                grid-gap: 10px;
            }
            img {
                width:100%;
                height:100%;
                object-fit:cover;
            }
        </style>        
    </head>
    <body>       
        
        
        <script>

            // Configuration  
            var columns = 10,
                rows = 5;
                
            // Cr√©e une liste vide pour stocker les cellules occup√©es de la grille
            var occupied_cells = [];

            // Cr√©e une liste vide pour stocker les images
            var liste = [];
            // Ajoute 25 entr√©es dans la liste, chacune constitu√©e de l‚ÄôURL d‚Äôune image
            for( var i = 1; i < 25; i++ ){
                liste.push("http://ateliers.esad-pyrenees.fr/_inc/img/250/"+ i +".jpg");
            }
            // La liste peut aussi √™tre d√©termin√©e non-al√©atoirement


            // D√©termine l‚Äô√©l√©ment dans lequel on souhaite ins√©rer les images
            var container = document.querySelector('body');
            // D√©termine les grilles et colonnes de l‚Äô√©l√©ment
            container.style.gridTemplateColumns = "repeat("+ columns +", 1fr)";
            container.style.gridTemplateRows = "repeat(" + rows + ", 1fr)";

            // Pour chaque √©l√©ment de la liste‚Ä¶
            for(var i = 0; i < liste.length; i++){
                // Cr√©e un √©l√©ment <img>,
                var image = document.createElement('img');
                // assigne un src correspondant √† la ùëõi√®me entr√©e dans la liste,
                image.src= liste[ i ];

                putImageIntoRandomCell(image);
            }

            function putImageIntoRandomCell(image){

                // Emp√™cher une boucle infinie si le nombre d‚Äôimages est sup√©rieur au nombre de cellules
                if (liste.length >= rows*columns ) { 
                    return false; 
                }
                
                // D√©termine une ligne et une colonne al√©atoires
                // contraintes par les dimensions du conteneur
                var row = parseInt( Math.round( Math.random() * rows ) );
                var column = parseInt( Math.round( Math.random() * columns ) );
                // Syntaxe n√©cessaire pour grid-area
                var cell = row + " / " + column;

                // V√©rifie que la cellule n‚Äôest pas d√©j√† occup√©e 
                if (occupied_cells.indexOf(cell) < 0) {                    
                    // Si elle ne l‚Äôest pas, affecte la propri√©t√© CSS √† l‚Äôimage
                    image.style.gridArea = cell;  
                    // ins√®re √† l‚Äôint√©rieur du conteneur
                    container.appendChild(image);                  
                } else {
                    // Sinon, r√©essaie‚Ä¶
                    console.log(image)
                    putImageIntoRandomCell(image);
                }
                // Ajoute la cellule √† la liste des cellules occup√©es
                occupied_cells.push(cell);
                
            }
        </script>
    </body>
</html>